<div class="title-box">
  <span class="title">Price Overview</span>
</div>

@for (product of products; track product.name) {
  <div
    class="drink-box mb-2 cursor-pointer"
    (click)="onProductClick(product)"
  >
    <span class="drink-name">{{ product.name }}</span>

    <svg
      viewBox="0 0 512 512"
      xmlns="http://www.w3.org/2000/svg"
      class="icon"
      [ngClass]="{ 'active': product.liked, 'inactive': !product.liked }"
      (click)="onHeartClick($event, product)"
    >
      <path
        d="M225.8 468.2l-2.5-2.3L48.1 303.2C17.4 274.7 0 234.7 0 192.8v-3.3c0-70.4 50-130.8 119.2-144C158.6 37.9 198.9 47 231 69.6c9 6.4 17.4 13.8 25 22.3c4.2-4.8 8.7-9.2 13.5-13.3c3.7-3.2 7.5-6.2 11.5-9c0 0 0 0 0 0C313.1 47 353.4 37.9 392.8 45.4C462 58.6 512 119.1 512 189.5v3.3c0 41.9-17.4 81.9-48.1 110.4L288.7 465.9l-2.5 2.3c-8.2 7.6-19 11.9-30.2 11.9s-22-4.2-30.2-11.9z"
      ></path>
    </svg>

    @if (product.imageURL) {
      <div class="w-6 h-6 overflow-hidden mr-2">
        <img [src]="product.imageURL" alt="{{ product.name }}" class="w-full h-full object-cover">
      </div>
    }

    <div class="price-container">
      <span class="price">{{ product.latestCalculatedPrice }}€ </span>
    </div>
  </div>
}

@if(selectedProduct) {
  <div class="fixed inset-0 flex justify-center items-center z-50">
    <div class="bg-box border border-gold p-6 rounded-lg w-96 max-w-full text-white">
      <h3 class=" text-lg font-bold mb-4">
        Möchtest du {{ selectedProduct.name }} zum Preis von {{ selectedProduct.latestCalculatedPrice }} € zur Bestellung hinzufügen?
      </h3>
      <label for="quantity" class="block font-medium mb-2">Bestellmenge:</label>
      <input
        id="quantity"
        type="number"
        [(ngModel)]="orderQuantity"
        class="w-full border rounded px-2 py-1 text-box"
      >
      <div class="flex justify-end mt-4">
        <button
          class="bg-red text-white px-4 py-2 rounded mr-2"
          (click)="closePopup()"
        >
          Abbrechen
        </button>
        <button
          class="bg-green text-white px-4 py-2 rounded"
          (click)="addToOrder()"
        >
          Hinzufügen
        </button>
      </div>
    </div>
  </div>
}
